---
title: "Property Analysis of Ferroelastomer"
author: "Billy Koech"
date: "10/10/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

# import libraries
library(tidyverse) # tidy
library(janitor) # for cleaning names
library(readxl) # package for importing data
```

## Permeability Analysis

```{r}

# load data

file_path <- "~/Google\ Drive/for_Billy_Koech/from_Billy/Fe+Elastomer\ experiments/V2_experiment_design_mixing_ratios_by_volume.xlsx"

ferroelastomer_data <- read_xlsx(file_path, sheet = 2,
                             range = cell_rows(1:16)) %>% clean_names()


# gather the data
gathered_data <-ferroelastomer_data %>% gather(c(x1_inductance_u_h_at_1khz, x2_inductance_u_h_at_1khz, x3_inductance_u_h_at_1khz, x4_inductance_u_h_at_1khz, x5_inductance_u_h_at_1khz), key = "quantity", value = "uH",na.rm = FALSE)

# group by quantity and compute mean
avg_and_std <- gathered_data %>% group_by(sample_number, volume_ratio, particle_size_microns) %>% summarise(avg = mean(uH), dev = sd(uH))

# plot raw data:
ggplot(gathered_data,aes(x = volume_ratio, y = uH, group = particle_size_microns, color = as.factor(particle_size_microns))) + geom_line()

# grouped with SD
ggplot(avg_and_std,aes(x = volume_ratio, y = avg, group = particle_size_microns, color = as.factor(particle_size_microns))) + geom_line() + geom_point() +
  
  labs(title = "Graph of Inductance against volume ratio", subtitle  = "Each line represents particles of different sizes", color = "Iron particle sizes") + 
  xlab(label = "Percentage of Iron in sample") + 
  ylab(label = "Inductance measured at 1KHz") +
  geom_errorbar(aes(ymin=avg-dev, ymax=avg+dev), width=.01)


# faceted with sd
ggplot(avg_and_std,aes(x = volume_ratio, y = avg)) + facet_wrap(~particle_size_microns) + geom_line() + geom_point() +
  
  labs(title = "Graph of Inductance against volume ratio", subtitle  = "Each box represents particles of different sizes", color = "Iron particle sizes") + 
  xlab(label = "Percentage of Iron in sample") + 
  ylab(label = "Inductance measured at 1KHz") +
  geom_errorbar(aes(ymin=avg-dev, ymax=avg+dev), width=.01)
```

